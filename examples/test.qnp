import "std.qnp"

space std:
	void printBlockList():
		print("ChunkList:\n")
		__MemBlockHeader* curr = __memBlocks
		while curr != null:
			print(" This: ")
			print((u64)curr)

			print("\n Prev: ")
			print((u64)curr->prev)

			print("\n Next: ")
			print((u64)curr->next)

			print("\n Size: ")
			print(curr->sizeAvail)

			print("\n DiffToPrev: ")
			if curr->prev != null:
				print((u64)curr - (u64)curr->prev)
			else:
				print("--")

			print("\n DiffToNext: ")
			if curr->next != null:
				print((u64)curr->next - (u64)curr)
			else:
				print("--")

			print("\n\n")
			curr = curr->next
		print("-----------------\n")

std::printBlockList()

void* buff1 = std::malloc(100)
std::printBlockList()
void* buff2 = std::malloc(10000)
std::printBlockList()

std::free(buff2)
std::printBlockList()

std::free(buff1)
std::printBlockList()

buff1 = std::malloc(12000)
std::printBlockList()